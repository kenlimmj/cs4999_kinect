<!DOCTYPE html>
<html>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Deferred Irradiance Map</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="js/code.js"></script>
<link href="css/style.css" rel="stylesheet" />

<body>
  <canvas id="display"></canvas>
  <div id="ui"></div>
</body>

<script src="http://cdnjs.cloudflare.com/ajax/libs/kineticjs/5.0.1/kinetic.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/mousetrap/1.4.6/mousetrap.min.js"></script>
<script src="../js/websocket.js"></script>
<script src="../js/cursor.js"></script>
<script src="../js/gesture.js"></script>
<script src="../js/viewport.js"></script>

<script>
cursor.drawLeft = false;
cursor.drawRight = false;

function triggerKeyboardEvent(el, keyCode) {
  var eventObj = document.createEventObject ?
    document.createEventObject() : document.createEvent("Events");

  if (eventObj.initEvent) {
    eventObj.initEvent("keydown", true, true);
  }

  eventObj.keyCode = keyCode;
  eventObj.which = keyCode;

  el.dispatchEvent ? el.dispatchEvent(eventObj) : el.fireEvent("onkeydown", eventObj);
}

function releaseKeyboardEvent(el, keyCode) {
  var eventObj = document.createEventObject ?
    document.createEventObject() : document.createEvent("Events");

  if (eventObj.initEvent) {
    eventObj.initEvent("keyup", true, true);
  }

  eventObj.keyCode = keyCode;
  eventObj.which = keyCode;

  el.dispatchEvent ? el.dispatchEvent(eventObj) : el.fireEvent("onkeyup", eventObj);
}

addEventListener("genericLeftPull", function() {
  triggerKeyboardEvent(document.body, 83);
  setTimeout(function() {
    releaseKeyboardEvent(document.body, 83);
  }, 250);
});
addEventListener("genericLeftPush", function() {
  triggerKeyBoardEvent(document, 87);
  setTimeout(function() {
    releaseKeyboardEvent(document.body, 87);
  }, 250);
});
addEventListener("closedMove", function(event) {
  // var e = $.Event('mousemove');
  // e.pageX = event.rightX;
  // e.pageY = event.rightY;
  // $(document).mousedown().trigger(e);
});
</script>

</html>
