var nav=function(){{var e="kinectNavOverlay",t="Kinect Viewport",i="User Viewport",s="App Viewport",r=1.618,h="#444",n="#444",p=8.09,o="#444",a=14,w=5,u="right";({width:window.innerWidth,height:window.innerHeight})}return{init:function(){if(document.getElementById(this.navOverlayName))var t=document.getElementById(this.navOverlayName);else{var t=document.createElement("div");t.setAttribute("id",this.navOverlayName),t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.style.zIndex=999,document.body.insertBefore(t,document.body.firstChild)}this.overlay=new Kinetic.Stage({container:e,width:t.offsetWidth,height:t.offsetHeight}),this.debug&&(this.userViewportLayer=new Kinetic.Layer,this.kinectViewportLayer=new Kinetic.Layer,this.appViewportLayer=new Kinetic.Layer)},setAppViewport:function(e,t){var e=e||window.innerWidth,t=t||window.innerHeight;return this.app.width=e,this.app.height=t,this.app},setKinectViewport:function(e,t){var e=e||512,t=t||424;return this.kinectSensor.width=e,this.kinectSensor.height=t,this.kinectSensor},setUserViewport:function(e,t){var e=e||this.kinectSensor.width,t=t||this.kinectSensor.height;return this.user.viewport.width=e,this.user.viewport.height=t,this.user.viewport.xMin=this.user.spineBase.x-e/2,this.user.viewport.xMax=this.user.spineBase.x+e/2,this.user.viewport.yMin=this.user.spineBase.y-t,this.user.viewport.yMax=this.user.spineBase.y,this.user.viewport},setUserSpineBase:function(e,t){var e=e||this.kinectSensor.width/2,t=t||0;return this.user.spineBase.x=e,this.user.spineBase.y=t,this.user.spineBase},drawKinectViewport:function(){return this.kinectViewport=new Kinetic.Rect({x:this.app.width/2-this.kinectSensor.width/2,y:this.app.height/2-this.kinectSensor.height/2,width:this.kinectSensor.width,height:this.kinectSensor.height,stroke:h,strokeWidth:r}),this.kinectViewportLabel=new Kinetic.Text({x:this.app.width/2-this.kinectSensor.width/2,y:this.app.height/2+this.kinectSensor.height/2+w,width:this.kinectSensor.width,align:u,text:t+"\n"+this.kinectSensor.width+"x"+this.kinectSensor.height,fontSize:a,fill:o}),this.kinectViewportLayer.add(this.kinectViewport).add(this.kinectViewportLabel),this.overlay.add(this.kinectViewportLayer),this.kinectViewportLayer},drawUserViewport:function(){return this.userViewport=new Kinetic.Rect({x:this.user.spineBase.x-this.user.viewport.width/2+this.kinectViewport.getX(),y:this.user.spineBase.y-this.user.viewport.height+this.kinectViewport.getY(),width:this.user.viewport.width,height:this.user.viewport.height,stroke:h,strokeWidth:r}),this.userSpineBase=new Kinetic.Circle({x:this.user.spineBase.x+this.kinectViewport.getX(),y:this.user.spineBase.y+this.kinectViewport.getY(),radius:p,fill:n}),this.userSpineConnector=new Kinetic.Line({points:[this.userSpineBase.getX(),this.userSpineBase.getY(),this.appSpineBase.getX(),this.appSpineBase.getY()],stroke:h,strokeWidth:r,lineJoin:"round",dash:[10,5]}),this.userViewportLabel=new Kinetic.Text({x:this.user.spineBase.x-this.user.viewport.width/2+this.kinectViewport.getX(),y:this.user.spineBase.y+this.kinectViewport.getY()+5,width:this.user.viewport.width,align:u,text:i+this.user.viewport.width+"x"+this.user.viewport.height,fontSize:a,fill:o}),this.userViewportLayer.add(this.userViewport).add(this.userSpineBase).add(this.userSpineConnector).add(this.userViewportLabel),this.overlay.add(this.userViewportLayer),this.userViewportLayer},updateUserViewport:function(){return this.userViewport.setX(this.user.spineBase.x-this.user.viewport.width/2+this.kinectViewport.getX()),this.userViewport.setY(this.user.spineBase.y-this.user.viewport.height+this.kinectViewport.getY()),this.userViewport.setWidth(this.user.viewport.width),this.userViewport.setHeight(this.user.viewport.height),this.userSpineBase.setX(this.user.spineBase.x+this.kinectViewport.getX()),this.userSpineBase.setY(this.user.spineBase.y+this.kinectViewport.getY()),this.userSpineConnector.setPoints([this.userSpineBase.getX(),this.userSpineBase.getY(),this.appSpineBase.getX(),this.appSpineBase.getY()]),this.userViewportLabel.setX(this.user.spineBase.x-this.user.viewport.width/2+nav.kinectViewport.getX()),this.userViewportLabel.setY(this.user.spineBase.y+this.kinectViewport.getY()+5),this.userViewportLabel.setWidth(nav.uWidth),this.userViewportLabel.setText(i+"\n"+this.user.viewport.width+"x"+this.user.viewport.height),this.userViewportLayer.batchDraw(),this.userViewportLayer},drawAppViewport:function(){this.appSpineBase=new Kinetic.Circle({x:this.app.width/2,y:this.app.height,radius:1.618*p,fill:n}),this.appViewportLabel=new Kinetic.Text({x:0,y:this.app.height-30,width:this.app.width-10,align:u,text:s+"\n"+this.app.width+"x"+this.app.height,fontSize:a,fill:o}),this.appViewportLayer.add(this.appSpineBase).add(this.appViewportLabel),this.overlay.add(this.appViewportLayer)}}}();