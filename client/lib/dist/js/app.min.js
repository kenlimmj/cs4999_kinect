var cursor={debug:!1,drawLeft:!0,drawRight:!0,leftX:null,leftY:null,rightX:null,rightY:null,leftLockX:!1,leftLockY:!1,leftLockD:!1,rightLockX:!1,rightLockY:!1,rightLockD:!1,unknown_radius:65.45,open_radius:25,grab_radius:15.45,point_radius:5.9,init:function(){cursor.leftCursorLayer=new Kinetic.Layer,cursor.rightCursorLayer=new Kinetic.Layer;var e=cursor.map(cursor.leftX,cursor.leftY),r=cursor.map(cursor.rightX,cursor.rightY);cursor.leftScreenCursor=new Kinetic.Circle({x:e[0],y:e[1],radius:cursor.open_radius,fill:"#d33682"}),cursor.rightScreenCursor=new Kinetic.Circle({x:r[0],y:r[1],radius:cursor.open_radius,fill:"#6c71c4"}),cursor.debug===!0&&(cursor.leftScreenCursorLabel=new Kinetic.Text({x:cursor.leftScreenCursor.getX()+cursor.leftScreenCursor.radius(),y:cursor.leftScreenCursor.getY()+cursor.leftScreenCursor.radius(),align:"left",text:cursor.leftScreenCursor.getX()+"\n"+cursor.leftScreenCursor.getY(),fontSize:14,fill:"#d33682"}),cursor.rightScreenCursorLabel=new Kinetic.Text({x:cursor.rightScreenCursor.getX()+cursor.rightScreenCursor.radius(),y:cursor.rightScreenCursor.getY()+cursor.rightScreenCursor.radius(),align:"left",text:cursor.rightScreenCursor.getX()+"\n"+cursor.rightScreenCursor.getY(),fontSize:14,fill:"#6c71c4"}),cursor.leftUserCursor=new Kinetic.Circle({x:cursor.leftX+nav.kinectView.getX(),y:cursor.leftY+nav.kinectView.getY(),radius:cursor.open_radius/1.618,fill:"#d33682"}),cursor.rightUserCursor=new Kinetic.Circle({x:cursor.rightX+nav.kinectView.getX(),y:cursor.rightY+nav.kinectView.getY(),radius:cursor.open_radius/1.618,fill:"#6c71c4"}),cursor.leftUserCursorLabel=new Kinetic.Text({x:cursor.leftUserCursor.getX()+cursor.leftUserCursor.radius(),y:cursor.leftUserCursor.getY()+cursor.leftUserCursor.radius(),align:"left",text:cursor.leftX+"\n"+cursor.leftY,fontSize:11,fill:"#d33682"}),cursor.rightUserCursorLabel=new Kinetic.Text({x:cursor.rightUserCursor.getX()+cursor.rightUserCursor.radius(),y:cursor.rightUserCursor.getY()+cursor.rightUserCursor.radius(),align:"left",text:cursor.rightX+"\n"+cursor.rightY,fontSize:11,fill:"#6c71c4"}),cursor.leftCursorConnector=new Kinetic.Line({points:[cursor.leftUserCursor.getX(),cursor.leftUserCursor.getY(),cursor.leftScreenCursor.getX(),cursor.leftScreenCursor.getY()],stroke:"#d33682",strokeWidth:1.618,lineJoin:"round",dash:[10,5]}),cursor.rightCursorConnector=new Kinetic.Line({points:[cursor.rightUserCursor.getX(),cursor.rightUserCursor.getY(),cursor.rightScreenCursor.getX(),cursor.rightScreenCursor.getY()],stroke:"#6c71c4",strokeWidth:1.618,lineJoin:"round",dash:[10,5]})),cursor.drawLeft===!0&&cursor.leftCursorLayer.add(cursor.leftScreenCursor),cursor.drawRight===!0&&cursor.rightCursorLayer.add(cursor.rightScreenCursor),cursor.debug===!0&&(cursor.leftCursorLayer.add(cursor.leftScreenCursorLabel),cursor.leftCursorLayer.add(cursor.leftUserCursor).add(cursor.leftUserCursorLabel),cursor.leftCursorLayer.add(cursor.leftCursorConnector),cursor.rightCursorLayer.add(cursor.rightScreenCursorLabel),cursor.rightCursorLayer.add(cursor.rightUserCursor).add(cursor.rightUserCursorLabel),cursor.rightCursorLayer.add(cursor.rightCursorConnector)),nav.overlay.add(cursor.leftCursorLayer).add(cursor.rightCursorLayer)},setLeftHand:function(e,r){cursor.leftX=e,cursor.leftY=r},setRightHand:function(e,r){cursor.rightX=e,cursor.rightY=r},get_radius:function(e){switch(e){case"open":return cursor.open_radius;case"closed":return cursor.grab_radius;case"point":return cursor.point_radius;default:return cursor.unknown_radius}},get_threshold:function(e){switch(e){case"open":return.01;case"closed":return.01;case"pull":return.01;case"point":return.005;default:return.01}},stabilize:function(e,r){return e-e%r+(e%r>0&&r)},getElement:function(e,r){var t=cursor.map(e,r);return document.elementFromPoint(t[0],t[1])},map:function(e,r){return screenX=e<nav.uxMin?0:e>nav.uxMax?nav.sWidth:(e-nav.uxMin)/nav.uWidth*nav.sWidth,screenY=r<nav.uyMin?0:r>nav.uyMax?nav.sHeight:(r-nav.uyMin)/nav.uHeight*nav.sHeight,[Math.round(screenX),Math.round(screenY)]},updateLeftHand:function(){var e=cursor.map(cursor.leftX,cursor.leftY);cursor.leftLockX===!1&&cursor.leftScreenCursor.setX(e[0]),cursor.leftLockY===!1&&cursor.leftScreenCursor.setY(e[1]),cursor.leftScreenCursor.setRadius(cursor.get_radius(gesture.leftHand)),cursor.debug===!0&&(cursor.leftLockX===!1&&cursor.leftScreenCursorLabel.setX(cursor.leftScreenCursor.getX()+cursor.leftScreenCursor.radius()),cursor.leftLockY===!1&&cursor.leftScreenCursorLabel.setY(cursor.leftScreenCursor.getY()+cursor.leftScreenCursor.radius()),cursor.leftScreenCursorLabel.setText(gesture.leftHand+"\n"+cursor.leftScreenCursor.getX()+"\n"+cursor.leftScreenCursor.getY()),cursor.leftUserCursor.setX(cursor.leftX+nav.kinectView.getX()),cursor.leftUserCursor.setY(cursor.leftY+nav.kinectView.getY()),cursor.leftUserCursorLabel.setX(cursor.leftUserCursor.getX()+cursor.leftUserCursor.radius()),cursor.leftUserCursorLabel.setY(cursor.leftUserCursor.getY()+cursor.leftUserCursor.radius()),cursor.leftUserCursorLabel.setText(cursor.leftX+"\n"+cursor.leftY),cursor.leftCursorConnector.setPoints([cursor.leftUserCursor.getX(),cursor.leftUserCursor.getY(),cursor.leftScreenCursor.getX(),cursor.leftScreenCursor.getY()])),cursor.leftCursorLayer.batchDraw()},updateRightHand:function(){var e=cursor.map(cursor.rightX,cursor.rightY);cursor.rightLockX===!1&&cursor.rightScreenCursor.setX(e[0]),cursor.rightLockY===!1&&cursor.rightScreenCursor.setY(e[1]),cursor.rightScreenCursor.setRadius(cursor.get_radius(gesture.rightHand)),cursor.debug===!0&&(cursor.rightLockX===!1&&cursor.rightScreenCursorLabel.setX(cursor.rightScreenCursor.getX()+cursor.rightScreenCursor.radius()),cursor.rightLockY===!1&&cursor.rightScreenCursorLabel.setY(cursor.rightScreenCursor.getY()+cursor.rightScreenCursor.radius()),cursor.rightScreenCursorLabel.setText(gesture.rightHand+"\n"+cursor.rightScreenCursor.getX()+"\n"+cursor.rightScreenCursor.getY()),cursor.rightUserCursor.setX(cursor.rightX+nav.kinectView.getX()),cursor.rightUserCursor.setY(cursor.rightY+nav.kinectView.getY()),cursor.rightUserCursorLabel.setX(cursor.rightUserCursor.getX()+cursor.rightUserCursor.radius()),cursor.rightUserCursorLabel.setY(cursor.rightUserCursor.getY()+cursor.rightUserCursor.radius()),cursor.rightUserCursorLabel.setText(cursor.rightX+"\n"+cursor.rightY),cursor.rightCursorConnector.setPoints([cursor.rightUserCursor.getX(),cursor.rightUserCursor.getY(),cursor.rightScreenCursor.getX(),cursor.rightScreenCursor.getY()])),cursor.rightCursorLayer.batchDraw()}},gesture={debug:!1,leftHand:null,rightHand:null,swipeState:null,init:function(){gesture.cursorMove=new CustomEvent("cursorMove",{bubbles:!0,cancelable:!0}),gesture.closedMove=new CustomEvent("closedCursorMove",{bubbles:!0,cancelable:!0}),gesture.genericLeftPull=new CustomEvent("genericLeftPull",{bubbles:!0,cancelable:!0}),gesture.genericRightPull=new CustomEvent("genericRightPull",{bubbles:!0,cancelable:!0}),gesture.genericLeftPush=new CustomEvent("genericLeftPush",{bubbles:!0,cancelable:!0}),gesture.genericRightPush=new CustomEvent("genericRightPush",{bubbles:!0,cancelable:!0}),gesture.elemLeftPull=new CustomEvent("elemLeftPull",{bubbles:!0,cancelable:!0}),gesture.elemRightPull=new CustomEvent("elemRightPull",{bubbles:!0,cancelable:!0}),gesture.elemLeftPush=new CustomEvent("elemLeftPush",{bubbles:!0,cancelable:!0}),gesture.elemRightPush=new CustomEvent("elemRightPush",{bubbles:!0,cancelable:!0}),gesture.zoom=new CustomEvent("zoom",{bubbles:!0,cancelable:!0}),gesture.swipeLeft=new CustomEvent("swipeLeft",{bubbles:!0,cancelable:!0}),gesture.swipeRight=new CustomEvent("swipeRight",{bubbles:!0,cancelable:!0}),gesture.swipeUp=new CustomEvent("swipeUp",{bubbles:!0,cancelable:!0}),gesture.swipeDown=new CustomEvent("swipeDown",{bubbles:!0,cancelable:!0})},setLeftHand:function(e){gesture.leftHand=e},setRightHand:function(e){gesture.rightHand=e},setSwipeState:function(e){gesture.swipeState=e},process:function(){switch(gesture.swipeState){case"left":dispatchEvent(gesture.swipeLeft);break;case"right":dispatchEvent(gesture.swipeRight);break;case"up":dispatchEvent(gesture.swipeUp);break;case"down":dispatchEvent(gesture.swipeDown);break;case"none":default:var e=cursor.getElement(cursor.leftX,cursor.leftY),r=cursor.map(cursor.leftX,cursor.leftY);switch(gesture.leftHand){case"open":case"point":default:gesture.cursorMove.leftX=r[0],gesture.cursorMove.leftY=r[1],dispatchEvent(gesture.cursorMove),cursor.drawLeft===!0&&cursor.updateLeftHand();break;case"closed":gesture.closedMove.leftX=r[0],gesture.closedMove.leftY=r[1],dispatchEvent(gesture.closedMove),cursor.drawLeft===!0&&cursor.updateLeftHand();break;case"pull":dispatchEvent(gesture.genericLeftPull),e&&(gesture.elemLeftPull.elem=e,e.dispatchEvent(gesture.elemLeftPull));break;case"push":dispatchEvent(gesture.genericLeftPush),e&&(gesture.elemLeftPush.elem=e,e.dispatchEvent(gesture.elemLeftPush));break;case"zoom":e.dispatchEvent(gesture.zoom)}var t=cursor.getElement(cursor.rightX,cursor.rightY),n=cursor.map(cursor.rightX,cursor.rightY);switch(gesture.rightHand){case"open":case"point":default:gesture.cursorMove.rightX=n[0],gesture.cursorMove.rightY=n[1],dispatchEvent(gesture.cursorMove),cursor.drawRight===!0&&cursor.updateRightHand();break;case"closed":gesture.closedMove.rightX=n[0],gesture.closedMove.rightY=n[1],dispatchEvent(gesture.closedMove),cursor.drawRight===!0&&cursor.updateRightHand();break;case"pull":dispatchEvent(gesture.genericRightPull),t&&(gesture.elemRightPull.elem=t,t.dispatchEvent(gesture.elemRightPull));break;case"push":dispatchEvent(gesture.genericRightPush),t&&(gesture.elemRightPush.elem=t,t.dispatchEvent(gesture.elemRightPush));break;case"zoom":t.dispatchEvent(gesture.zoom)}}}}(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e,r){function t(e){function r(){n?(t(),_(r),s=!0,n=!1):s=!1}var t=e,n=!1,s=!1;this.kick=function(){n=!0,s||r()},this.end=function(e){var r=t;e&&(s?(t=n?function(){r(),e()}:e,n=!0):e())}}function n(){return!0}function s(){return!1}function i(e){e.preventDefault()}function u(e){B[e.target.tagName.toLowerCase()]||e.preventDefault()}function o(e){return 1===e.which&&!e.ctrlKey&&!e.altKey}function a(e,r){var t,n;if(e.identifiedTouch)return e.identifiedTouch(r);for(t=-1,n=e.length;++t<n;)if(e[t].identifier===r)return e[t]}function c(e,r){var t=a(e.changedTouches,r.identifier);if(t&&(t.pageX!==r.pageX||t.pageY!==r.pageY))return t}function g(e){var r;o(e)&&(r={target:e.target,startX:e.pageX,startY:e.pageY,timeStamp:e.timeStamp},K(document,D.move,d,r),K(document,D.cancel,l,r))}function d(e){var r=e.data;m(e,r,e,h)}function l(){h()}function h(){M(document,D.move,d),M(document,D.cancel,l)}function v(e){var r,t;B[e.target.tagName.toLowerCase()]||(r=e.changedTouches[0],t={target:r.target,startX:r.pageX,startY:r.pageY,timeStamp:e.timeStamp,identifier:r.identifier},K(document,z.move+"."+r.identifier,f,t),K(document,z.cancel+"."+r.identifier,p,t))}function f(e){var r=e.data,t=c(e,r);t&&m(e,r,t,w)}function p(e){var r=e.data,t=a(e.changedTouches,r.identifier);t&&w(r.identifier)}function w(e){M(document,"."+e,f),M(document,"."+e,p)}function m(e,r,t,n){var s=t.pageX-r.startX,i=t.pageY-r.startY;P*P>s*s+i*i||b(e,r,t,s,i,n)}function C(){return this._handled=n,!1}function S(e){e._handled()}function b(e,r,t,n,s,i){{var u,o;r.target}u=e.targetTouches,o=e.timeStamp-r.timeStamp,r.type="movestart",r.distX=n,r.distY=s,r.deltaX=n,r.deltaY=s,r.pageX=t.pageX,r.pageY=t.pageY,r.velocityX=n/o,r.velocityY=s/o,r.targetTouches=u,r.finger=u?u.length:1,r._handled=C,r._preventTouchmoveDefault=function(){e.preventDefault()},T(r.target,r),i(r.identifier)}function X(e){var r=e.data.timer;e.data.touch=e,e.data.timeStamp=e.timeStamp,r.kick()}function Y(e){var r=e.data.event,t=e.data.timer;L(),x(r,t,function(){setTimeout(function(){M(r.target,"click",s)},0)})}function L(){M(document,D.move,X),M(document,D.end,Y)}function k(e){var r=e.data.event,t=e.data.timer,n=c(e,r);n&&(e.preventDefault(),r.targetTouches=e.targetTouches,e.data.touch=n,e.data.timeStamp=e.timeStamp,t.kick())}function y(e){var r=e.data.event,t=e.data.timer,n=a(e.changedTouches,r.identifier);n&&(V(r),x(r,t))}function V(e){M(document,"."+e.identifier,k),M(document,"."+e.identifier,y)}function U(e,r,t){var n=t-e.timeStamp;e.type="move",e.distX=r.pageX-e.startX,e.distY=r.pageY-e.startY,e.deltaX=r.pageX-e.pageX,e.deltaY=r.pageY-e.pageY,e.velocityX=.3*e.velocityX+.7*e.deltaX/n,e.velocityY=.3*e.velocityY+.7*e.deltaY/n,e.pageX=r.pageX,e.pageY=r.pageY}function x(e,r,t){r.end(function(){return e.type="moveend",T(e.target,e),t&&t()})}function H(){return K(this,"movestart.move",S),!0}function W(){return M(this,"dragstart drag",i),M(this,"mousedown touchstart",u),M(this,"movestart",S),!0}function E(e){"move"!==e.namespace&&"moveend"!==e.namespace&&(K(this,"dragstart."+e.guid+" drag."+e.guid,i,r,e.selector),K(this,"mousedown."+e.guid,u,r,e.selector))}function R(e){"move"!==e.namespace&&"moveend"!==e.namespace&&(M(this,"dragstart."+e.guid+" drag."+e.guid),M(this,"mousedown."+e.guid))}var P=6,K=e.event.add,M=e.event.remove,T=function(r,t,n){e.event.trigger(t,n,r)},_=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(function(){e()},25)}}(),B={textarea:!0,input:!0,select:!0,button:!0},D={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},z={move:"touchmove",cancel:"touchend",end:"touchend"};e.event.special.movestart={setup:H,teardown:W,add:E,remove:R,_default:function(e){function n(){U(i,u.touch,u.timeStamp),T(e.target,i)}var i,u;e._handled()&&(i={target:e.target,startX:e.startX,startY:e.startY,pageX:e.pageX,pageY:e.pageY,distX:e.distX,distY:e.distY,deltaX:e.deltaX,deltaY:e.deltaY,velocityX:e.velocityX,velocityY:e.velocityY,timeStamp:e.timeStamp,identifier:e.identifier,targetTouches:e.targetTouches,finger:e.finger},u={event:i,timer:new t(n),touch:r,timeStamp:r},e.identifier===r?(K(e.target,"click",s),K(document,D.move,X,u),K(document,D.end,Y,u)):(e._preventTouchmoveDefault(),K(document,z.move+"."+e.identifier,k,u),K(document,z.end+"."+e.identifier,y,u)))}},e.event.special.move={setup:function(){K(this,"movestart.move",e.noop)},teardown:function(){M(this,"movestart.move",e.noop)}},e.event.special.moveend={setup:function(){K(this,"movestart.moveend",e.noop)},teardown:function(){M(this,"movestart.moveend",e.noop)}},K(document,"mousedown.move",g),K(document,"touchstart.move",v),"function"==typeof Array.prototype.indexOf&&!function(e){for(var r=["changedTouches","targetTouches"],t=r.length;t--;)-1===e.event.props.indexOf(r[t])&&e.event.props.push(r[t])}(e)}),nav={debug:!1,engaged:!1,sWidth:window.innerWidth,sHeight:window.innerHeight,kWidth:512,kHeight:424,uSpineX:null,uSpineY:null,uWidth:null,uHeight:null,init:function(){nav.overlay=new Kinetic.Stage({container:"nav",width:document.querySelector("#nav").offsetWidth,height:document.querySelector("#nav").offsetHeight}),nav.debug===!0&&(nav.userViewLayer=new Kinetic.Layer,nav.kinectViewLayer=new Kinetic.Layer,nav.screenViewLayer=new Kinetic.Layer)},setScreenView:function(e,r){nav.sWidth=e,nav.sHeight=r},setKinectView:function(e,r){nav.kWidth=e,nav.kHeight=r},setUserSpineBase:function(e,r){nav.uSpineX=e,nav.uSpineY=r},setUserView:function(e,r){nav.uWidth=e,nav.uHeight=r,nav.uxMin=nav.uSpineX-nav.uWidth/2,nav.uxMax=nav.uSpineX+nav.uWidth/2,nav.uyMin=nav.uSpineY-nav.uHeight,nav.uyMax=nav.uSpineY},drawKinectView:function(){nav.kinectView=new Kinetic.Rect({x:nav.sWidth/2-nav.kWidth/2,y:nav.sHeight/2-nav.kHeight/2,width:nav.kWidth,height:nav.kHeight,stroke:"#444",strokeWidth:1.618}),nav.kinectViewLabel=new Kinetic.Text({x:nav.sWidth/2-nav.kWidth/2,y:nav.sHeight/2+nav.kHeight/2+5,width:nav.kWidth,align:"right",text:"Kinect Viewport\n"+nav.kWidth+"x"+nav.kHeight,fontSize:14,fill:"#444"}),nav.kinectViewLayer.add(nav.kinectView).add(nav.kinectViewLabel),nav.overlay.add(nav.kinectViewLayer)},drawUserView:function(){nav.userView=new Kinetic.Rect({x:nav.uSpineX-nav.uWidth/2+nav.kinectView.getX(),y:nav.uSpineY-nav.uHeight+nav.kinectView.getY(),width:nav.uWidth,height:nav.uHeight,stroke:"#444",strokeWidth:1.618}),nav.userSpineBase=new Kinetic.Circle({x:nav.uSpineX+nav.kinectView.getX(),y:nav.uSpineY+nav.kinectView.getY(),radius:8.09,fill:"#444"}),nav.userSpineConnector=new Kinetic.Line({points:[nav.userSpineBase.getX(),nav.userSpineBase.getY(),nav.screenSpineBase.getX(),nav.screenSpineBase.getY()],stroke:"#444",strokeWidth:1.618,lineJoin:"round",dash:[10,5]}),nav.userViewLabel=new Kinetic.Text({x:nav.uSpineX-nav.uWidth/2+nav.kinectView.getX(),y:nav.uSpineY+nav.kinectView.getY()+5,width:nav.uWidth,align:"right",text:"User Viewport\n"+nav.uWidth+"x"+nav.uHeight,fontSize:14,fill:"#444"}),nav.userViewLayer.add(nav.userView).add(nav.userSpineBase).add(nav.userSpineConnector).add(nav.userViewLabel),nav.overlay.add(nav.userViewLayer)},updateUserView:function(){nav.userView.setX(nav.uSpineX-nav.uWidth/2+nav.kinectView.getX()),nav.userView.setY(nav.uSpineY-nav.uHeight+nav.kinectView.getY()),nav.userView.setWidth(nav.uWidth),nav.userView.setHeight(nav.uHeight),nav.userSpineBase.setX(nav.uSpineX+nav.kinectView.getX()),nav.userSpineBase.setY(nav.uSpineY+nav.kinectView.getY()),nav.userSpineConnector.setPoints([nav.userSpineBase.getX(),nav.userSpineBase.getY(),nav.screenSpineBase.getX(),nav.screenSpineBase.getY()]),nav.userViewLabel.setX(nav.uSpineX-nav.uWidth/2+nav.kinectView.getX()),nav.userViewLabel.setY(nav.uSpineY+nav.kinectView.getY()+5),nav.userViewLabel.setWidth(nav.uWidth),nav.userViewLabel.setText("User Viewport\n"+nav.uWidth+"x"+nav.uHeight),nav.userViewLayer.batchDraw()},drawScreenView:function(){nav.screenSpineBase=new Kinetic.Circle({x:nav.sWidth/2,y:nav.sHeight,radius:11.326,fill:"#444"}),nav.screenViewLabel=new Kinetic.Text({x:0,y:nav.sHeight-30,width:nav.sWidth-10,align:"right",text:"Screen Viewport\n"+nav.sWidth+"x"+nav.sHeight,fontSize:14,fill:"#444"}),nav.screenViewLayer.add(nav.screenSpineBase).add(nav.screenViewLabel),nav.overlay.add(nav.screenViewLayer)}},ws={debug:!1,socketAddress:"ws://localhost:1620/KinectApp",connectionAttempts:1,frameData:[],init:function(){try{var e=new WebSocket(this.socketAddress)}catch(r){}e.onopen=function(){ws.connectionAttempts=1,nav.init(),ws.debug===!0&&(nav.drawKinectView(),nav.drawScreenView(),nav.drawUserView()),cursor.init(),gesture.init()},e.onmessage=function(e){if("string"==typeof e.data){var r=JSON.parse(e.data);ws.frameData.push(r),nav.setUserSpineBase(r.sx,r.sy),nav.setUserView(r.screenw,r.screenh),ws.debug===!0&&nav.updateUserView(),gesture.setSwipeState(r.swipeval),cursor.setLeftHand(r.lx,r.ly),gesture.setLeftHand(r.lhandState),cursor.setRightHand(r.rx,r.ry),gesture.setRightHand(r.rhandState),gesture.process()}},e.onclose=function(){var e=ws.generateInterval(ws.connectionAttempts);setTimeout(function(){ws.connectionAttempts++,ws.init()},e)}},generateInterval:function(e){var r=5e3*(Math.pow(2,e)-1);return r>15e4&&(r=15e4),Math.random()*r},drawInitGuide:function(){}};Mousetrap.bind("shift+c",function(){ws.init()});